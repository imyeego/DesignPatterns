## 观察者模式



### 定义
对象间的一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。

### 结构

![](http://img.hb.aicdn.com/118cae46da5cdc2c16d87b14070f2897b801faed35218-v9ApTO_fw658)

### 步骤

1. 创建目标对象
2. 具体目标对象
3. 创建观察者接口
4. 实现观察者接口
5. 测试类

### 认识观察者模式

---

#### 1.目标与观察者的关系

* 一对一
* 一对多
* 多对一

#### 2.单向依赖

观察者依赖目标，而目标不依赖观察者，观察者时被动的。

#### 3.命名建议

1. 目标接口后缀建议为Subject
2. 观察者接口Subject
3. 观察者接口的更新方法update()

#### 4.触发通知的时机

状态维护（目标对象的setter方法里）后触发

#### 5.调用顺序示意图
准备阶段：

![准备阶段](http://img.hb.aicdn.com/e93608954c34cdc152545f9f12c048762279fba516c9d-mGmDMk_fw658)

运行阶段：

![](http://img.hb.aicdn.com/b82ac805ef5f8c21470077f1e33bf353a6dac1bf15bbf-JzMwcW_fw658)

### 实现方式
#### 推模式

#### 拉模式